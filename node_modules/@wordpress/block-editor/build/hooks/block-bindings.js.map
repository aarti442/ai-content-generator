{"version":3,"names":["_i18n","require","_blocks","_components","_data","_element","_compose","_useBindingsAttributes","_lockUnlock","_inspectorControls","_interopRequireDefault","_blockContext","_blockEdit","_blockBindings","_store","_jsxRuntime","Menu","unlock","componentsPrivateApis","EMPTY_OBJECT","useToolsPanelDropdownMenuProps","isMobile","useViewportMatch","popoverProps","placement","offset","BlockBindingsPanelDropdown","fieldsList","attribute","binding","clientId","useBlockEditContext","registeredSources","getBlockBindingsSources","updateBlockBindings","useBlockBindingsUtils","currentKey","args","key","attributeType","useSelect","select","name","blockName","blockEditorStore","getBlock","_attributeType","getBlockType","attributes","type","jsx","Fragment","children","Object","entries","map","fields","i","jsxs","Group","keys","length","GroupLabel","label","filter","RadioItem","onChange","source","value","checked","ItemLabel","ItemHelpText","Separator","BlockBindingsAttribute","sourceName","sourceProps","getBlockBindingsSource","isSourceInvalid","__experimentalVStack","className","spacing","__experimentalText","truncate","variant","isDestructive","__","ReadOnlyBlockBindingsPanelItems","bindings","__experimentalItem","EditableBlockBindingsPanelItems","__experimentalToolsPanelItem","hasValue","onDeselect","undefined","gutter","trigger","BlockBindingsPanel","metadata","blockContext","useContext","BlockContext","removeAllBlockBindings","bindableAttributes","getBindableAttributes","dropdownMenuProps","_fieldsList","canUpdateBlockBindings","forEach","getFieldsList","usesContext","context","sourceList","values","getSettings","filteredBindings","canBindAttribute","readOnly","default","group","__experimentalToolsPanel","resetAll","__experimentalItemGroup","isBordered","isSeparated","as","exports","_default","edit","attributeKeys","hasSupport"],"sources":["@wordpress/block-editor/src/hooks/block-bindings.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tgetBlockBindingsSource,\n\tgetBlockBindingsSources,\n\tgetBlockType,\n} from '@wordpress/blocks';\nimport {\n\t__experimentalItemGroup as ItemGroup,\n\t__experimentalItem as Item,\n\t__experimentalText as Text,\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalVStack as VStack,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { useContext, Fragment } from '@wordpress/element';\nimport { useViewportMatch } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport {\n\tcanBindAttribute,\n\tgetBindableAttributes,\n} from '../hooks/use-bindings-attributes';\nimport { unlock } from '../lock-unlock';\nimport InspectorControls from '../components/inspector-controls';\nimport BlockContext from '../components/block-context';\nimport { useBlockEditContext } from '../components/block-edit';\nimport { useBlockBindingsUtils } from '../utils/block-bindings';\nimport { store as blockEditorStore } from '../store';\n\nconst { Menu } = unlock( componentsPrivateApis );\n\nconst EMPTY_OBJECT = {};\n\nconst useToolsPanelDropdownMenuProps = () => {\n\tconst isMobile = useViewportMatch( 'medium', '<' );\n\treturn ! isMobile\n\t\t? {\n\t\t\t\tpopoverProps: {\n\t\t\t\t\tplacement: 'left-start',\n\t\t\t\t\t// For non-mobile, inner sidebar width (248px) - button width (24px) - border (1px) + padding (16px) + spacing (20px)\n\t\t\t\t\toffset: 259,\n\t\t\t\t},\n\t\t  }\n\t\t: {};\n};\n\nfunction BlockBindingsPanelDropdown( { fieldsList, attribute, binding } ) {\n\tconst { clientId } = useBlockEditContext();\n\tconst registeredSources = getBlockBindingsSources();\n\tconst { updateBlockBindings } = useBlockBindingsUtils();\n\tconst currentKey = binding?.args?.key;\n\tconst attributeType = useSelect(\n\t\t( select ) => {\n\t\t\tconst { name: blockName } =\n\t\t\t\tselect( blockEditorStore ).getBlock( clientId );\n\t\t\tconst _attributeType =\n\t\t\t\tgetBlockType( blockName ).attributes?.[ attribute ]?.type;\n\t\t\treturn _attributeType === 'rich-text' ? 'string' : _attributeType;\n\t\t},\n\t\t[ clientId, attribute ]\n\t);\n\treturn (\n\t\t<>\n\t\t\t{ Object.entries( fieldsList ).map( ( [ name, fields ], i ) => (\n\t\t\t\t<Fragment key={ name }>\n\t\t\t\t\t<Menu.Group>\n\t\t\t\t\t\t{ Object.keys( fieldsList ).length > 1 && (\n\t\t\t\t\t\t\t<Menu.GroupLabel>\n\t\t\t\t\t\t\t\t{ registeredSources[ name ].label }\n\t\t\t\t\t\t\t</Menu.GroupLabel>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ Object.entries( fields )\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t( [ , args ] ) => args?.type === attributeType\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map( ( [ key, args ] ) => (\n\t\t\t\t\t\t\t\t<Menu.RadioItem\n\t\t\t\t\t\t\t\t\tkey={ key }\n\t\t\t\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\t\t\t\tupdateBlockBindings( {\n\t\t\t\t\t\t\t\t\t\t\t[ attribute ]: {\n\t\t\t\t\t\t\t\t\t\t\t\tsource: name,\n\t\t\t\t\t\t\t\t\t\t\t\targs: { key },\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tname={ attribute + '-binding' }\n\t\t\t\t\t\t\t\t\tvalue={ key }\n\t\t\t\t\t\t\t\t\tchecked={ key === currentKey }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Menu.ItemLabel>\n\t\t\t\t\t\t\t\t\t\t{ args?.label }\n\t\t\t\t\t\t\t\t\t</Menu.ItemLabel>\n\t\t\t\t\t\t\t\t\t<Menu.ItemHelpText>\n\t\t\t\t\t\t\t\t\t\t{ args?.value }\n\t\t\t\t\t\t\t\t\t</Menu.ItemHelpText>\n\t\t\t\t\t\t\t\t</Menu.RadioItem>\n\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t</Menu.Group>\n\t\t\t\t\t{ i !== Object.keys( fieldsList ).length - 1 && (\n\t\t\t\t\t\t<Menu.Separator />\n\t\t\t\t\t) }\n\t\t\t\t</Fragment>\n\t\t\t) ) }\n\t\t</>\n\t);\n}\n\nfunction BlockBindingsAttribute( { attribute, binding, fieldsList } ) {\n\tconst { source: sourceName, args } = binding || {};\n\tconst sourceProps = getBlockBindingsSource( sourceName );\n\tconst isSourceInvalid = ! sourceProps;\n\treturn (\n\t\t<VStack className=\"block-editor-bindings__item\" spacing={ 0 }>\n\t\t\t<Text truncate>{ attribute }</Text>\n\t\t\t{ !! binding && (\n\t\t\t\t<Text\n\t\t\t\t\ttruncate\n\t\t\t\t\tvariant={ ! isSourceInvalid && 'muted' }\n\t\t\t\t\tisDestructive={ isSourceInvalid }\n\t\t\t\t>\n\t\t\t\t\t{ isSourceInvalid\n\t\t\t\t\t\t? __( 'Invalid source' )\n\t\t\t\t\t\t: fieldsList?.[ sourceName ]?.[ args?.key ]?.label ||\n\t\t\t\t\t\t  sourceProps?.label ||\n\t\t\t\t\t\t  sourceName }\n\t\t\t\t</Text>\n\t\t\t) }\n\t\t</VStack>\n\t);\n}\n\nfunction ReadOnlyBlockBindingsPanelItems( { bindings, fieldsList } ) {\n\treturn (\n\t\t<>\n\t\t\t{ Object.entries( bindings ).map( ( [ attribute, binding ] ) => (\n\t\t\t\t<Item key={ attribute }>\n\t\t\t\t\t<BlockBindingsAttribute\n\t\t\t\t\t\tattribute={ attribute }\n\t\t\t\t\t\tbinding={ binding }\n\t\t\t\t\t\tfieldsList={ fieldsList }\n\t\t\t\t\t/>\n\t\t\t\t</Item>\n\t\t\t) ) }\n\t\t</>\n\t);\n}\n\nfunction EditableBlockBindingsPanelItems( {\n\tattributes,\n\tbindings,\n\tfieldsList,\n} ) {\n\tconst { updateBlockBindings } = useBlockBindingsUtils();\n\tconst isMobile = useViewportMatch( 'medium', '<' );\n\treturn (\n\t\t<>\n\t\t\t{ attributes.map( ( attribute ) => {\n\t\t\t\tconst binding = bindings[ attribute ];\n\t\t\t\treturn (\n\t\t\t\t\t<ToolsPanelItem\n\t\t\t\t\t\tkey={ attribute }\n\t\t\t\t\t\thasValue={ () => !! binding }\n\t\t\t\t\t\tlabel={ attribute }\n\t\t\t\t\t\tonDeselect={ () => {\n\t\t\t\t\t\t\tupdateBlockBindings( {\n\t\t\t\t\t\t\t\t[ attribute ]: undefined,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\tplacement={\n\t\t\t\t\t\t\t\tisMobile ? 'bottom-start' : 'left-start'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tgutter={ isMobile ? 8 : 36 }\n\t\t\t\t\t\t\ttrigger={\n\t\t\t\t\t\t\t\t<Item>\n\t\t\t\t\t\t\t\t\t<BlockBindingsAttribute\n\t\t\t\t\t\t\t\t\t\tattribute={ attribute }\n\t\t\t\t\t\t\t\t\t\tbinding={ binding }\n\t\t\t\t\t\t\t\t\t\tfieldsList={ fieldsList }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Item>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BlockBindingsPanelDropdown\n\t\t\t\t\t\t\t\tfieldsList={ fieldsList }\n\t\t\t\t\t\t\t\tattribute={ attribute }\n\t\t\t\t\t\t\t\tbinding={ binding }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</ToolsPanelItem>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</>\n\t);\n}\n\nexport const BlockBindingsPanel = ( { name: blockName, metadata } ) => {\n\tconst blockContext = useContext( BlockContext );\n\tconst { removeAllBlockBindings } = useBlockBindingsUtils();\n\tconst bindableAttributes = getBindableAttributes( blockName );\n\tconst dropdownMenuProps = useToolsPanelDropdownMenuProps();\n\n\t// `useSelect` is used purposely here to ensure `getFieldsList`\n\t// is updated whenever there are updates in block context.\n\t// `source.getFieldsList` may also call a selector via `select`.\n\tconst _fieldsList = {};\n\tconst { fieldsList, canUpdateBlockBindings } = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! bindableAttributes || bindableAttributes.length === 0 ) {\n\t\t\t\treturn EMPTY_OBJECT;\n\t\t\t}\n\t\t\tconst registeredSources = getBlockBindingsSources();\n\t\t\tObject.entries( registeredSources ).forEach(\n\t\t\t\t( [ sourceName, { getFieldsList, usesContext } ] ) => {\n\t\t\t\t\tif ( getFieldsList ) {\n\t\t\t\t\t\t// Populate context.\n\t\t\t\t\t\tconst context = {};\n\t\t\t\t\t\tif ( usesContext?.length ) {\n\t\t\t\t\t\t\tfor ( const key of usesContext ) {\n\t\t\t\t\t\t\t\tcontext[ key ] = blockContext[ key ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst sourceList = getFieldsList( {\n\t\t\t\t\t\t\tselect,\n\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t} );\n\t\t\t\t\t\t// Only add source if the list is not empty.\n\t\t\t\t\t\tif ( Object.keys( sourceList || {} ).length ) {\n\t\t\t\t\t\t\t_fieldsList[ sourceName ] = { ...sourceList };\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tfieldsList:\n\t\t\t\t\tObject.values( _fieldsList ).length > 0\n\t\t\t\t\t\t? _fieldsList\n\t\t\t\t\t\t: EMPTY_OBJECT,\n\t\t\t\tcanUpdateBlockBindings:\n\t\t\t\t\tselect( blockEditorStore ).getSettings()\n\t\t\t\t\t\t.canUpdateBlockBindings,\n\t\t\t};\n\t\t},\n\t\t[ blockContext, bindableAttributes ]\n\t);\n\t// Return early if there are no bindable attributes.\n\tif ( ! bindableAttributes || bindableAttributes.length === 0 ) {\n\t\treturn null;\n\t}\n\t// Filter bindings to only show bindable attributes and remove pattern overrides.\n\tconst { bindings } = metadata || {};\n\tconst filteredBindings = { ...bindings };\n\tObject.keys( filteredBindings ).forEach( ( key ) => {\n\t\tif (\n\t\t\t! canBindAttribute( blockName, key ) ||\n\t\t\tfilteredBindings[ key ].source === 'core/pattern-overrides'\n\t\t) {\n\t\t\tdelete filteredBindings[ key ];\n\t\t}\n\t} );\n\n\t// Lock the UI when the user can't update bindings or there are no fields to connect to.\n\tconst readOnly =\n\t\t! canUpdateBlockBindings || ! Object.keys( fieldsList ).length;\n\n\tif ( readOnly && Object.keys( filteredBindings ).length === 0 ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<InspectorControls group=\"bindings\">\n\t\t\t<ToolsPanel\n\t\t\t\tlabel={ __( 'Attributes' ) }\n\t\t\t\tresetAll={ () => {\n\t\t\t\t\tremoveAllBlockBindings();\n\t\t\t\t} }\n\t\t\t\tdropdownMenuProps={ dropdownMenuProps }\n\t\t\t\tclassName=\"block-editor-bindings__panel\"\n\t\t\t>\n\t\t\t\t<ItemGroup isBordered isSeparated>\n\t\t\t\t\t{ readOnly ? (\n\t\t\t\t\t\t<ReadOnlyBlockBindingsPanelItems\n\t\t\t\t\t\t\tbindings={ filteredBindings }\n\t\t\t\t\t\t\tfieldsList={ fieldsList }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<EditableBlockBindingsPanelItems\n\t\t\t\t\t\t\tattributes={ bindableAttributes }\n\t\t\t\t\t\t\tbindings={ filteredBindings }\n\t\t\t\t\t\t\tfieldsList={ fieldsList }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ItemGroup>\n\t\t\t\t{ /*\n\t\t\t\t\tUse a div element to make the ToolsPanelHiddenInnerWrapper\n\t\t\t\t\ttoggle the visibility of this help text automatically.\n\t\t\t\t*/ }\n\t\t\t\t<Text as=\"div\" variant=\"muted\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Attributes connected to custom fields or other dynamic data.'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t</Text>\n\t\t\t</ToolsPanel>\n\t\t</InspectorControls>\n\t);\n};\n\nexport default {\n\tedit: BlockBindingsPanel,\n\tattributeKeys: [ 'metadata' ],\n\thasSupport() {\n\t\treturn true;\n\t},\n};\n"],"mappings":"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","ignoreList":[]}